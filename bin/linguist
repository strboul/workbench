#!/usr/bin/env bash

# Run Github Linguist on a git repository
# https://github.com/github/linguist
#
# Usage:
# linguist <path>

set -e

source "$HOME"/dotfiles/zsh/utils.sh

utils__stop_if_not_command_exists "docker"

PAT=$(utils__get_path "$@")

utils__git__check_repository "$PAT"

# TODO: official github image doesn't exist, replace once it's ready
# https://github.com/github/linguist/issues/4613
"$(command -v docker)" run --rm -it \
  -v "$PAT":/repo                   \
  crazymax/linguist:latest
